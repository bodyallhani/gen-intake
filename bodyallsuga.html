<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>한의원 수가계산기</title>
  <style>
    :root { --bg:#f5f6f8; --card:#ffffff; --text:#1f2937; --muted:#6b7280; --line:#e5e7eb; }
    * { box-sizing: border-box; }
    body{
      margin:0; padding:18px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
      background: var(--bg); color: var(--text);
    }
    .wrap{ max-width: 980px; margin:0 auto; }
    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 18px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      margin-bottom: 14px;
    }
    h1{ margin:0 0 10px; font-size: 22px; }
    h2{ margin:0 0 10px; font-size: 16px; }
    .muted{ color: var(--muted); font-size: 13px; line-height: 1.4; }
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 10px;
      margin-top: 10px;
    }
    .field{
      grid-column: span 6;
      border: 1px solid var(--line);
      border-radius: 10px;
      padding: 10px;
      background: #fff;
    }
    .field.small{ grid-column: span 4; }
    .field label{ display:block; font-size: 13px; margin-bottom: 6px; }
    .row{
      display:flex; gap: 8px; align-items:center;
    }
    input[type="text"]{
      width: 100%;
      padding: 10px 10px;
      border: 1px solid var(--line);
      border-radius: 10px;
      font-size: 14px;
      outline: none;
    }
    input[type="text"]:focus{ border-color:#c7d2fe; box-shadow: 0 0 0 3px rgba(99,102,241,0.15); }
    button{
      padding: 10px 10px;
      border: 1px solid var(--line);
      border-radius: 10px;
      background: #111827;
      color: #fff;
      cursor: pointer;
      font-size: 13px;
      white-space: nowrap;
    }
    button.secondary{
      background:#fff; color:#111827;
    }
    table{
      width: 100%;
      border-collapse: collapse;
      margin-top: 12px;
      overflow:hidden;
      border-radius: 12px;
      border: 1px solid var(--line);
      background:#fff;
    }
    th, td{
      border-bottom: 1px solid var(--line);
      border-right: 1px solid var(--line);
      padding: 10px 10px;
      text-align: right;
      font-size: 14px;
    }
    th:first-child, td:first-child{ text-align: left; }
    tr:last-child td{ border-bottom: none; }
    th:last-child, td:last-child{ border-right:none; }
    thead th{
      background:#fafafa;
      font-weight:600;
    }
    .note{
      margin-top: 10px;
      font-size: 12.5px;
      color: var(--muted);
    }
    .two{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .pill{
      border: 1px solid var(--line);
      border-radius: 12px;
      padding: 12px;
      background:#fff;
    }
    .pill .k{ font-size: 13px; color: var(--muted); margin-bottom: 6px; }
    .pill .v{ font-size: 18px; font-weight: 700; }
    @media (max-width: 760px){
      .field{ grid-column: span 12; }
      .field.small{ grid-column: span 12; }
      .two{ grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>한의원 수가계산기</h1>

      <h2>올해 추나 금액</h2>
      <div class="grid">
        <div class="field">
          <label for="a">a (올해 추나 금액)</label>
          <div class="row">
            <input id="a" type="text" inputmode="numeric" placeholder="예: 34,900" />
          </div>
          <div class="note">
            25년 - 34,900 / 24년 - 33,700 / 23년 - 32,500 / 22년 - 31,500 / 21년 - 30,600
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>올해 프로그램 금액</h2>
      <div class="grid">
        <div class="field small">
          <label for="A">A - 올추10</label>
          <input id="A" type="text" inputmode="numeric" placeholder="26년 : 490,000" />
        </div>
        <div class="field small">
          <label for="B">B - 올추20</label>
          <input id="B" type="text" inputmode="numeric" placeholder="26년 : 880,000" />
        </div>
        <div class="field small">
          <label for="C">C - 속추8</label>
          <input id="C" type="text" inputmode="numeric" placeholder="26년 : 920,000" />
        </div>
        <div class="field small">
          <label for="D">D - 속추16</label>
          <input id="D" type="text" inputmode="numeric" placeholder="26년 : 1,680,000" />
        </div>
        <div class="field small">
          <label for="E">E - 디추10</label>
          <input id="E" type="text" inputmode="numeric" placeholder="26년 : 589,000" />
        </div>
        <div class="field small">
          <label for="F">F - 디추20</label>
          <input id="F" type="text" inputmode="numeric" placeholder="26년 : 998,000" />
        </div>
      </div>

      <div class="grid" style="margin-top:12px;">
        <div class="field" style="grid-column: span 12;">
          <div class="row" style="flex-wrap: wrap;">
            <button type="button" id="fillPrograms">예시 금액 자동입력</button>
            <button type="button" class="secondary" id="clearPrograms">프로그램 금액 비우기</button>
          </div>
          <div class="note">버튼을 누르면 예시 금액(490000, 880000, 920000, 1680000, 589000, 998000)이 그대로 입력됩니다.</div>
        </div>
      </div>

      <h2 style="margin-top:14px;">결과 표</h2>
      <table aria-label="수가 결과 표">
        <thead>
          <tr>
            <th></th>
            <th>급여</th>
            <th>비급여</th>
            <th>총액</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>올추10</td>
            <td id="r2c2">-</td>
            <td id="r2c3">-</td>
            <td id="r2c4">-</td>
            <td></td>
          </tr>
          <tr>
            <td>올추20</td>
            <td id="r3c2">-</td>
            <td id="r3c3">-</td>
            <td id="r3c4">-</td>
            <td></td>
          </tr>
          <tr>
            <td>속추8</td>
            <td id="r4c2">-</td>
            <td id="r4c3">-</td>
            <td id="r4c4">-</td>
            <td></td>
          </tr>
          <tr>
            <td>속추16</td>
            <td id="r5c2">-</td>
            <td id="r5c3">-</td>
            <td id="r5c4">-</td>
            <td></td>
          </tr>
          <tr>
            <td>디추10</td>
            <td id="r6c2">-</td>
            <td id="r6c3">-</td>
            <td id="r6c4">-</td>
            <td></td>
          </tr>
          <tr>
            <td>디추20</td>
            <td id="r7c2">-</td>
            <td id="r7c3">-</td>
            <td id="r7c4">-</td>
            <td></td>
          </tr>
        </tbody>
      </table>

      <div class="note">
        계산식(요약):<br/>
        올추10: 급여=a*10, 비급여=A-(a*10), 총액=A<br/>
        올추20: 급여=a*20, 비급여=B-(a*20), 총액=B<br/>
        속추8: 급여=a*5, 비급여=C-(a*5), 총액=C<br/>
        속추16: 급여=a*10, 비급여=D-(a*10), 총액=D<br/>
        디추10: 급여=a*10, 비급여=E-(a*10), 총액=E<br/>
        디추20: 급여=a*20, 비급여=F-(a*20), 총액=F
      </div>
    </div>

    <div class="card">
      <h2>속추 비급여 분리</h2>

      <div class="grid">
        <div class="field">
          <label for="Y">Y - 속추8 약침 금액</label>
          <div class="row">
            <input id="Y" type="text" inputmode="numeric" placeholder="26년 : 175,000원" />
            <button type="button" id="fillY">예시입력</button>
          </div>
        </div>
        <div class="field">
          <label for="Z">Z - 속추16 약침 금액</label>
          <div class="row">
            <input id="Z" type="text" inputmode="numeric" placeholder="26년 : 224,000원" />
            <button type="button" id="fillZ">예시입력</button>
          </div>
        </div>
      </div>

      <div class="two">
        <div class="pill">
          <div class="k">속추8 공추</div>
          <div class="v" id="outS_gongchu">-</div>
          <div class="note">= S - Y (S = 속추8 비급여 = 4x3)</div>
        </div>
        <div class="pill">
          <div class="k">속추8 약침</div>
          <div class="v" id="outS_yakchim">-</div>
          <div class="note">= Y</div>
        </div>
        <div class="pill">
          <div class="k">속추16 공추</div>
          <div class="v" id="outT_gongchu">-</div>
          <div class="note">= T - Z (T = 속추16 비급여 = 5x3)</div>
        </div>
        <div class="pill">
          <div class="k">속추16 약침</div>
          <div class="v" id="outT_yakchim">-</div>
          <div class="note">= Z</div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="muted">
        입력 팁: 숫자만 입력해도 되고(예: 34900), 쉼표/원/공백이 섞여 있어도 자동으로 숫자만 추출합니다.
      </div>
    </div>
  </div>

  <script>
    // --- helpers ---
    const $ = (id) => document.getElementById(id);

    function parseMoney(v){
      if (v == null) return 0;
      const s = String(v).replace(/[^\d.-]/g, "");
      const n = Number(s);
      return Number.isFinite(n) ? n : 0;
    }
    function fmtMoney(n){
      if (!Number.isFinite(n)) return "-";
      // 표시용: 음수도 그대로 표기(원하시면 0으로 바꾸는 옵션 넣어드릴 수 있음)
      return n.toLocaleString("ko-KR");
    }
    function setCell(id, n){
      $(id).textContent = (Number.isFinite(n)) ? fmtMoney(n) : "-";
    }

    function recalc(){
      const a = parseMoney($("a").value);

      const A = parseMoney($("A").value);
      const B = parseMoney($("B").value);
      const C = parseMoney($("C").value);
      const D = parseMoney($("D").value);
      const E = parseMoney($("E").value);
      const F = parseMoney($("F").value);

      // 표 계산
      const r2c2 = a*10;
      const r2c3 = A - (a*10);
      const r2c4 = A;

      const r3c2 = a*20;
      const r3c3 = B - (a*20);
      const r3c4 = B;

      const r4c2 = a*5;
      const r4c3 = C - (a*5);   // S
      const r4c4 = C;

      const r5c2 = a*10;
      const r5c3 = D - (a*10);  // T
      const r5c4 = D;

      const r6c2 = a*10;
      const r6c3 = E - (a*10);
      const r6c4 = E;

      const r7c2 = a*20;
      const r7c3 = F - (a*20);
      const r7c4 = F;

      setCell("r2c2", r2c2); setCell("r2c3", r2c3); setCell("r2c4", r2c4);
      setCell("r3c2", r3c2); setCell("r3c3", r3c3); setCell("r3c4", r3c4);
      setCell("r4c2", r4c2); setCell("r4c3", r4c3); setCell("r4c4", r4c4);
      setCell("r5c2", r5c2); setCell("r5c3", r5c3); setCell("r5c4", r5c4);
      setCell("r6c2", r6c2); setCell("r6c3", r6c3); setCell("r6c4", r6c4);
      setCell("r7c2", r7c2); setCell("r7c3", r7c3); setCell("r7c4", r7c4);

      // 속추 비급여 분리
      const Y = parseMoney($("Y").value);
      const Z = parseMoney($("Z").value);

      const S = r4c3; // 4x3
      const T = r5c3; // 5x3

      const outS_gongchu = S - Y;
      const outS_yakchim = Y;
      const outT_gongchu = T - Z;
      const outT_yakchim = Z;

      $("outS_gongchu").textContent = fmtMoney(outS_gongchu);
      $("outS_yakchim").textContent = fmtMoney(outS_yakchim);
      $("outT_gongchu").textContent = fmtMoney(outT_gongchu);
      $("outT_yakchim").textContent = fmtMoney(outT_yakchim);
    }

    // --- buttons: program example fill ---
    $("fillPrograms").addEventListener("click", () => {
      $("A").value = "490000";
      $("B").value = "880000";
      $("C").value = "920000";
      $("D").value = "1680000";
      $("E").value = "589000";
      $("F").value = "998000";
      recalc();
    });

    $("clearPrograms").addEventListener("click", () => {
      ["A","B","C","D","E","F"].forEach(id => $(id).value = "");
      recalc();
    });

    $("fillY").addEventListener("click", () => { $("Y").value = "175000"; recalc(); });
    $("fillZ").addEventListener("click", () => { $("Z").value = "224000"; recalc(); });

    // --- live recalculation ---
    ["a","A","B","C","D","E","F","Y","Z"].forEach(id => {
      $(id).addEventListener("input", recalc);
      $(id).addEventListener("change", recalc);
    });

    // init
    recalc();
  </script>
</body>
</html>
